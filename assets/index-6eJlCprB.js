import{r as t,j as e,R as y}from"./index-JgEZXFFe.js";import{a as p,u as S}from"./chunk-WWGJGFF6-DjkZ_t3b.js";import{D as I}from"./Wallpaper-Linz-Doggies-Turquiose-1-Cqqizivk.js";import{R as b}from"./index-BvmAyFrM.js";import{m as j}from"./proxy-B8NW4Oew.js";import{B as u}from"./focus-BCInFMJ7.js";import{F as c}from"./index--TFoeH5B.js";import{I as R}from"./index-DgM4qe6o.js";import{u as T}from"./useTranslation-DRTFNy5h.js";import"./useBreakpoint-DhZIo47Y.js";import"./index-evwkGRXk.js";import"./getAllowClear-DSFRx4UW.js";import"./TextArea-Bm8ncQqU.js";const B=""+new URL("undraw_complete_design_re_h75h-IV-rT9qm.svg",import.meta.url).href;function F(){return new URLSearchParams(S().search)}const k=()=>{const[s,a]=t.useState(10),[l,n]=t.useState(!1),[h,i]=t.useState(!1),[g,o]=t.useState(!1),[d,m]=t.useState(""),x=p(),C=F().get("oobCode"),P=()=>{a(s-1)};t.useEffect(()=>{if(l){const r=setInterval(()=>{s>0&&P(),s==0&&(n(!0),x("/sign-in",{replace:!0})),clearInterval(r)},1e3)}});const N=async r=>{o(!0);try{await ConfirmResetPassword(C,d),n(!0),i(!0),o(!1)}catch(f){console.log(f.message),i(!1),o(!1)}},v=r=>{console.log("Failed:",r)};return h?e.jsxs(j.section,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.5},className:"resetpasswordform",style:{textAlign:"center"},children:[e.jsx("img",{src:B,alt:"",style:{width:180,margin:"10px auto"}}),e.jsx("h1",{className:"resetpasswordform-heading",children:"Password Updated"}),e.jsxs("span",{className:"resetpasswordform-subtext",children:["You have successfully reset the password ",e.jsx("br",{}),"You will be redirect to the sign-in page in ",s," seconds"]}),e.jsx(u,{onClick:()=>x("/sign-in"),type:"primary",htmlType:"submit",style:{fontWeight:"bold",fontSize:14,lineHeight:1.8,backgroundColor:"RGB(109, 156, 145)",borderColor:"RGB(109, 156, 145)",borderRadius:50,boxShadow:"rgb(0 0 0 / 25%) 0px 2px 4px 0px",marginBottom:10},children:"BACK TO SIGN IN"})]}):e.jsxs(j.section,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.5},className:"resetpasswordform",children:[e.jsx("h1",{className:"resetpasswordform-heading",children:"Create New Password!"}),e.jsx("span",{className:"resetpasswordform-subtext",children:"Your new password should be different from others app ðŸ”’"}),e.jsxs(c,{name:"basic",initialValues:{remember:!0},onFinish:N,onFinishFailed:v,validateTrigger:"onBlur",autoComplete:"on",children:[e.jsx(c.Item,{onChange:r=>m(r.target.value),name:"password",rules:[{required:!0,message:"Please enter your password!"},{min:6,message:"Password must be minimum 6 characters."}],children:e.jsx(R.Password,{prefix:e.jsx(b,{className:"site-form-item-icon"}),placeholder:"Password"})}),e.jsx(c.Item,{name:"confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:r})=>({validator(f,w){return!w||r("password")===w?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})],children:e.jsx(R.Password,{placeholder:"Confirm Password",prefix:e.jsx(b,{className:"site-form-item-icon"})})}),e.jsx(c.Item,{children:e.jsx(u,{className:"resetpassword-submit",loading:g,type:"primary",htmlType:"submit",children:"RESET PASSWORD"})})]})]})},q=s=>{const a=p();return s&&e.jsxs("section",{className:"invalidpage",style:{textAlign:"center"},children:[e.jsx("h1",{className:"invalidpage-heading",children:"Reset password link has expired"}),e.jsx("span",{className:"invalidpage-subtext",children:"Your request to reset your password has expired or the link has already been used. Please try again!"}),e.jsx(u,{onClick:()=>a("/forgot-password"),type:"primary",htmlType:"submit",style:{fontWeight:"bold",fontSize:14,lineHeight:1.8,backgroundColor:"RGB(109, 156, 145)",borderColor:"RGB(109, 156, 145)",borderRadius:50,boxShadow:"rgb(0 0 0 / 25%) 0px 2px 4px 0px",marginBottom:10},children:"BACK TO FORGOT PASSWORD"})]})};function E(){return new URLSearchParams(S().search)}function $(){const[s,a]=y.useState(),[l,n]=y.useState(!0),[h]=T(),i=p(),o=E().get("oobCode"),d=async()=>{try{a(!0)}catch(m){console.log(m.message)}};return t.useEffect(()=>{setTimeout(()=>{n(!1)},2e3)}),t.useEffect(()=>{d(),o||i("/")},[]),e.jsx(e.Fragment,{children:l?e.jsx(LoadingSpinner,{}):e.jsx("section",{style:{backgroundImage:` linear-gradient(rgba(255,255,255,.5), rgba(255,255,255,.5)),url(${I})`},className:"resetpasswordpage",children:e.jsx("section",{className:"resetpasswordpage-form",children:s?e.jsx(k,{}):e.jsx(q,{})})})})}export{$ as default};
