import{w as Y,m as L,A as T,E as k,G as $,H as J}from"./focus-CQ_iPNPW.js";import{r as d,R as r,q as Q}from"./index-CXsAr4fj.js";import{K as U}from"./index-DCH3tqKq.js";const{ESC:Z,TAB:ee}=U;function te({visible:e,triggerRef:o,onVisibleChange:t,autoFocus:n,overlayRef:f}){const a=d.useRef(!1),u=()=>{var s,l;e&&((l=(s=o.current)==null?void 0:s.focus)==null||l.call(s),t==null||t(!1))},c=()=>{var s;return(s=f.current)!=null&&s.focus?(f.current.focus(),a.current=!0,!0):!1},g=s=>{switch(s.keyCode){case Z:u();break;case ee:{let l=!1;a.current||(l=c()),l?s.preventDefault():u();break}}};d.useEffect(()=>e?(window.addEventListener("keydown",g),n&&Y(c,3),()=>{window.removeEventListener("keydown",g),a.current=!1}):()=>{a.current=!1},[e])}const ne=d.forwardRef((e,o)=>{const{overlay:t,arrow:n,prefixCls:f}=e,a=d.useMemo(()=>{let c;return typeof t=="function"?c=t():c=t,c},[t]),u=L(o,T(a));return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:`${f}-arrow`}),r.cloneElement(a,{ref:k(a)?u:void 0}))}),p={adjustX:1,adjustY:1},m=[0,0],oe={topLeft:{points:["bl","tl"],overflow:p,offset:[0,-4],targetOffset:m},top:{points:["bc","tc"],overflow:p,offset:[0,-4],targetOffset:m},topRight:{points:["br","tr"],overflow:p,offset:[0,-4],targetOffset:m},bottomLeft:{points:["tl","bl"],overflow:p,offset:[0,4],targetOffset:m},bottom:{points:["tc","bc"],overflow:p,offset:[0,4],targetOffset:m},bottomRight:{points:["tr","br"],overflow:p,offset:[0,4],targetOffset:m}};function R(){return R=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},R.apply(this,arguments)}function re(e,o){var q;const{arrow:t=!1,prefixCls:n="rc-dropdown",transitionName:f,animation:a,align:u,placement:c="bottomLeft",placements:g=oe,getPopupContainer:s,showAction:l,hideAction:D,overlayClassName:H,overlayStyle:S,visible:W,trigger:E=["hover"],autoFocus:F,overlay:C,children:v,onVisibleChange:w,...I}=e,[K,M]=r.useState(),b="visible"in e?W:K,z=a?`${n}-${a}`:f,N=r.useRef(null),P=r.useRef(null),x=r.useRef(null);r.useImperativeHandle(o,()=>N.current);const A=i=>{M(i),w==null||w(i)};te({visible:b,triggerRef:x,onVisibleChange:A,autoFocus:F,overlayRef:P});const B=i=>{const{onOverlayClick:h}=e;M(!1),h&&h(i)},j=()=>r.createElement(ne,{ref:P,overlay:C,prefixCls:n,arrow:t}),V=()=>typeof C=="function"?j:j(),_=()=>{const{minOverlayWidthMatchTrigger:i,alignPoint:h}=e;return"minOverlayWidthMatchTrigger"in e?i:!h},G=()=>{const{openClassName:i}=e;return i!==void 0?i:`${n}-open`},X=r.cloneElement(v,{className:$((q=v.props)==null?void 0:q.className,b&&G()),ref:k(v)?L(x,T(v)):void 0});let y=D;return!y&&E.indexOf("contextMenu")!==-1&&(y=["click"]),r.createElement(J,R({builtinPlacements:g},I,{prefixCls:n,ref:N,popupClassName:$(H,{[`${n}-show-arrow`]:t}),popupStyle:S,action:E,showAction:l,hideAction:y,popupPlacement:c,popupAlign:u,popupMotion:{motionName:z},popupVisible:b,stretch:_()?"minWidth":"",popup:V(),onPopupVisibleChange:A,onPopupClick:B,getPopupContainer:s}),X)}const fe=r.forwardRef(re);var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},O.apply(this,arguments)}const ae=(e,o)=>d.createElement(Q,O({},e,{ref:o,icon:se})),ue=d.forwardRef(ae);export{fe as D,ue as R};
