import{S as B,r as p,j as e}from"./index-JgEZXFFe.js";import{B as T}from"./index.esm-BzA9mdLO.js";import{a as V,u as F}from"./chunk-WWGJGFF6-DjkZ_t3b.js";import{l as I}from"./vi_VN-Cs_7G4UI.js";import{a as u}from"./index-4nCoxB4W.js";import{S as k}from"./SubHeader-DBitE5Ql.js";import{F as P}from"./Footer-qcRHcihJ.js";import{A as _}from"./NavBar-DyiOIyIz.js";import{u as A}from"./useTranslation-DRTFNy5h.js";import{C as E,B as R}from"./focus-BCInFMJ7.js";import{L as x}from"./index-Bqu70oAG.js";import{S as j}from"./index-CX6i4_Kt.js";import"./iconBase-CNDBy3GL.js";import"./index-CSBAjFoC.js";import"./proxy-B8NW4Oew.js";import"./icon-logo-primary-wTGcesre.js";import"./useBreakpoint-DhZIo47Y.js";const H=""+new URL("text-logo-black-CJyLiuZC.webp",import.meta.url).href,{Step:n}=j,{Header:O,Content:W,Footer:z}=x;function ne(){var a,l,d;const{t:r,i18n:y}=A(),f=V(),{search:Y}=B(),[s,g]=p.useState([]);p.useEffect(()=>{v()},[]);const N=F().pathname.split("/")[3],b=()=>{f("/",{replace:!0})},v=async()=>{try{const t=await u.put(`http://localhost:3001/api/order/success/${N}`);g(t.data),C(t.data)}catch(t){console.error(t)}},w=(t,o)=>{const i=new Date(t),h=new Date(o),c=new Date(i.getTime()),m=[];for(;c<=h;)m.push(new Date(c).getTime()),c.setDate(c.getDate()+1);return m},S=(a=s==null?void 0:s.products)==null?void 0:a.reduce((t,o)=>Number(t)+Number(o.price),0),D=(s==null?void 0:s.price)-S,C=async t=>{try{const o=w(t.start,t.end);await Promise.all(t.products.map(i=>u.put(`http://localhost:3001/api/hotel-room/availability/${i.roomId}`,{dates:o}).data))}catch{}};return e.jsx(E,{locale:y.language==="vi_VN"&&I,children:e.jsxs(x,{className:"departhtLayout",children:[e.jsxs(O,{children:[e.jsx(k,{}),e.jsx(_,{})]}),e.jsx(W,{children:e.jsxs("section",{className:"success_payment-page",children:[e.jsx("section",{className:"checkoutpage_step",children:e.jsxs(j,{current:3,size:"small",children:[e.jsx(n,{title:r("Your Selection"),description:r("Finish")}),e.jsx(n,{title:r("Your Details"),description:r("Finish")}),e.jsx(n,{title:r("Your Payment"),description:r("Finish")})]})}),e.jsxs("section",{className:"payment_status-page",children:[e.jsx(T,{color:"#4BB543",style:{fontSize:50,marginBottom:30}}),e.jsxs("h1",{style:{fontWeight:700},children:[" ",r("Payment Successfully")]}),e.jsxs("p",{children:[" ",r("Thank you for choosing Pet88")]}),e.jsxs("section",{class:"invoice-card",children:[e.jsxs("section",{class:"invoice-title",children:[e.jsx("img",{src:H,alt:"",style:{height:30}}),e.jsxs("section",{id:"main-title",children:[e.jsxs("h4",{children:[" PET88 ","INVOICE"]}),e.jsx("span",{children:(l=s.createdAt)==null?void 0:l.slice(0,10)})]}),e.jsxs("span",{id:"date",children:["No #",s==null?void 0:s._id]})]}),e.jsx("section",{class:"invoice-details",children:e.jsxs("table",{class:"invoice-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{children:"ROOM"}),e.jsx("td",{children:"NIGHT"}),e.jsx("td",{children:"PRICE"})]})}),e.jsx("tbody",{children:(d=s==null?void 0:s.products)==null?void 0:d.map(t=>e.jsxs("tr",{class:"row-data",children:[e.jsxs("td",{children:[t.roomNumber," ",e.jsx("span",{children:"(large)"})]}),e.jsx("td",{id:"unit",children:s.days}),e.jsxs("td",{children:[" ",new Intl.NumberFormat("vi_VN",{style:"currency",currency:"VND"}).format(t.price)]})]}))})]})}),e.jsxs("section",{class:"invoice-footer",children:[e.jsxs("td",{children:[r("VAT")," (8%)"]}),e.jsxs("td",{children:[" ",new Intl.NumberFormat("vi_VN",{style:"currency",currency:"VND"}).format(D)]})]}),e.jsxs("section",{class:"invoice-footer",children:[e.jsx("td",{children:r("Total")}),e.jsxs("td",{children:[" ",new Intl.NumberFormat("vi_VN",{style:"currency",currency:"VND"}).format(s==null?void 0:s.price)]})]})]}),e.jsx(R,{type:"primary",htmlType:"submit",style:{height:"fit-content",width:"150px",fontSize:16,lineHeight:1.8,marginTop:30,fontWeight:700,backgroundColor:"#4BB543",borderColor:"#4BB543",borderRadius:45,boxShadow:"rgb(0 0 0 / 25%) 0px 2px 4px 0px"},onClick:()=>b(),children:r("Ok")})]})]})}),e.jsx(z,{children:e.jsx(P,{})})]})})}export{ne as default};
